name: SSH ls -la + mail

on:
  workflow_dispatch:

jobs:
  ssh-and-mail:
    runs-on: ubuntu-latest

    steps:
      - name: Execute ls -la on remote host via SSH
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ secrets.SSH_HOST }}
          username: ${{ secrets.SSH_USER }}
          password: ${{ secrets.SSH_PASSWORD }}
          port: 22
          script: ls -la

      - name: Send email with repository name
        uses: dawidd6/action-send-mail@v3
        with:
          server_address: mail.abix.info.pl
          server_port: 465
          secure: true
          username: alx-kurs@abix.info.pl
          password: "74a93d0649cc71c05759c301b5c50b1c"
          subject: GitHub Action executed
          to: adam@jurkiewicz.tech
          from: alx-kurs@abix.info.pl
          body: |
            Workflow zosta≈Ç uruchomiony z repozytorium:
            ${{ github.repository }}
 
